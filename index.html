<!-- REMOVE this line if you still have it -->
<!-- <script src="script.js" type="module"></script> -->

<!-- ADD this inline script instead -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const grid = document.getElementById('grid');
  const year = document.getElementById('year');
  if (year) year.textContent = new Date().getFullYear();

  const gh = document.getElementById('ghLink');
  const li = document.getElementById('liLink');
  if (gh) gh.href = 'https://github.com/heathergauthier2018';
  if (li) li.href = 'https://www.linkedin.com/in/heather-gauthier-11903a2a3/';

  // Built-in fallback so cards render even if JSON 404s or is invalid.
  const FALLBACK_ITEMS = [
    {
      title: "Cocktail Studio (Random + Search)",
      description: "Single-page app combining a random generator with a search explorer. Favorites saved in localStorage.",
      tags: ["HTML", "CSS", "JavaScript", "API"],
      demo: "https://heathergauthier2018.github.io/cocktail-finder/",
      repo: "https://github.com/heathergauthier2018/cocktail-finder",
      image: "thumbs/random-cocktail.jpg"
    },
    {
      title: "World Map (Angular, Course Project)",
      description: "Interactive SVG world map in Angular with country details from the World Bank API.",
      tags: ["Angular", "Routing", "HTTPClient", "API"],
      demo: "#",        // Hidden until you have a real link
      repo: "#",
      image: "thumbs/world-map.jpg"
    },
    {
      title: "D277 Front-End Web Development",
      description: "Responsive multi-page site showing semantic HTML, modern CSS (Flexbox/Grid), and vanilla JS interactivity.",
      tags: ["HTML","CSS","JavaScript","Accessibility"],
      demo: "https://d277-front-end-web-development-b3bf51.gitlab.io/",
      repo: "",
      image: "thumbs/thumb-placeholder.jpg"  // swap to thumbs/d277.jpg when ready
    }
  ];

  // Try to load projects.json; if it fails, fall back to the built-in list.
  (async function loadProjects() {
    let items = FALLBACK_ITEMS;
    try {
      const res = await fetch('projects.json?force=' + Date.now(), { cache: 'no-store' });
      if (!res.ok) throw new Error('projects.json HTTP ' + res.status);
      const data = await res.json();
      if (Array.isArray(data) && data.length) items = data;
    } catch (e) {
      console.warn('Using fallback projects:', e);
    }
    render(items);
  })();

  function render(items) {
    if (!grid) return;
    grid.innerHTML = '';
    const frag = document.createDocumentFragment();
    items.forEach(p => {
      const card = document.createElement('article');
      card.className = 'card';
      const imgSrc = p.image || 'thumbs/thumb-placeholder.jpg';
      const hasDemo = !!(p.demo && p.demo !== '#');
      const hasRepo = !!(p.repo && p.repo !== '#');

      card.innerHTML = `
        <img class="thumb"
             src="${imgSrc}"
             alt="Screenshot of ${escapeHtml(p.title || 'project')}"
             onerror="this.onerror=null;this.src='thumbs/thumb-placeholder.jpg'">
        <div class="content">
          <h3 class="title">${escapeHtml(p.title)}</h3>
          <p class="desc">${escapeHtml(p.description || '')}</p>
          <div class="tags">${(p.tags || []).map(t => `<span class="tag">${escapeHtml(t)}</span>`).join('')}</div>
          <div class="actions">
            ${hasDemo ? `<a class="btn" href="${p.demo}" target="_blank" rel="noreferrer">Live Demo</a>` : ''}
            ${hasRepo ? `<a class="btn" href="${p.repo}" target="_blank" rel="noreferrer">Repo</a>` : ''}
          </div>
        </div>
      `;
      frag.appendChild(card);
    });
    grid.appendChild(frag);
  }

  function escapeHtml(str) {
    return String(str)
      .replaceAll('&','&amp;')
      .replaceAll('<','&lt;')
      .replaceAll('>','&gt;')
      .replaceAll('"','&quot;')
      .replaceAll("'",'&#39;');
  }
});
</script>

